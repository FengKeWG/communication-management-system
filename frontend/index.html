<!DOCTYPE html>
<html lang="zh">

<head>
    <meta charset="UTF-8">
    <title>登录</title>
    <link rel="stylesheet" href="/css/login.css">
    <!-- 添加模态框的CSS (如果需要单独样式) -->
    <link rel="stylesheet" href="/css/modal.css">
</head>

<body>
    <form class="form-control" action="">
        <p class="title">登陆</p>

        <div class="input-field">
            <input required class="input" type="text" id="username" />
            <label class="label" for="username">输入用户名</label>
        </div>

        <div class="input-field">
            <input required class="input" type="password" id="password" />
            <label class="label" for="password">输入密码</label>
        </div>

        <!-- 修改忘记密码链接 -->
        <a href="#" onclick="showForgotPasswordModal(event)">忘记密码?</a>

        <button class="submit-btn" type="button" onclick="login()">登陆</button>
    </form>

    <!-- 忘记密码模态框 -->
    <div id="forgotPasswordModal" class="modal">
        <div class="modal-content">
            <span class="close-btn" onclick="closeForgotPasswordModal()">×</span>
            <h2>忘记密码</h2>

            <div id="verificationStep">
                <p>此功能仅限业务员使用。请输入您的信息进行验证：</p>
                <div class="input-field">
                    <input required class="input" type="text" id="fpUsername" autocomplete="username" />
                    <!-- 添加 autocomplete 提示 -->
                    <label class="label" for="fpUsername">用户名</label>
                </div>
                <div class="input-field">
                    <input required class="input" type="text" id="fpName" autocomplete="name" />
                    <!-- 添加 autocomplete 提示 -->
                    <label class="label" for="fpName">姓名</label>
                </div>

                <!-- === 修改后的生日输入框 === -->
                <!-- 不再需要额外的 <p> 提示文字 -->
                <div style="display: flex; gap: 10px; margin-top: -5px;">
                    <!-- 使用 Flex 布局排列, 调整上边距以匹配其他 input-field 的间距 -->
                    <div class="input-field" style="flex: 1;"> <!-- flex: 1 让它们平分宽度 -->
                        <input required class="input" type="number" id="fpBirthYear" min="1900" max="2100" />
                        <!-- 注意：label 的 for 属性对应 input 的 id -->
                        <label class="label" for="fpBirthYear">年 (YYYY)</label>
                    </div>
                    <div class="input-field" style="flex: 1;">
                        <input required class="input" type="number" id="fpBirthMonth" min="1" max="12" />
                        <label class="label" for="fpBirthMonth">月 (MM)</label>
                    </div>
                    <div class="input-field" style="flex: 1;">
                        <input required class="input" type="number" id="fpBirthDay" min="1" max="31" />
                        <label class="label" for="fpBirthDay">日 (DD)</label>
                    </div>
                </div>
                <!-- === 原生日输入框结构已删除 === -->

                <div class="input-field">
                    <input required class="input" type="email" id="fpEmail" autocomplete="email" />
                    <!-- 添加 autocomplete 提示 -->
                    <label class="label" for="fpEmail">邮箱</label>
                </div>
                <button class="submit-btn" type="button" onclick="handleVerificationSubmit()">验证</button>
                <p id="verificationError" class="error-message"></p>
            </div>

            <!-- 步骤2：重置密码 -->
            <div id="resetStep" style="display: none;">
                <p>验证成功！请输入新密码。</p>
                <input type="hidden" id="verifiedUsername">
                <div class="input-field">
                    <!-- 使用 "new-password" 提示浏览器这是新密码字段 -->
                    <input required class="input" type="password" id="fpNewPassword" autocomplete="new-password" />
                    <label class="label" for="fpNewPassword">新密码</label>
                </div>
                <div class="input-field">
                    <input required class="input" type="password" id="fpConfirmPassword" autocomplete="new-password" />
                    <label class="label" for="fpConfirmPassword">确认新密码</label>
                </div>
                <button class="submit-btn" type="button" onclick="handlePasswordResetSubmit()">重置密码</button>
                <p id="resetError" class="error-message"></p>
                <p id="resetSuccess" class="success-message"></p>
            </div>
        </div>
    </div>


    <script src="/js/login.js"></script>
</body>

</html>